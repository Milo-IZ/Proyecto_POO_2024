{% extends "index.html" %}
{% block content %}
<div class="container">
    
    <h5>{{contenido.titulo}}</h5>
    <img src="{{contenido.imagen}}" class="img-fluid">
    <h5><strong>Materia: </strong>{{contenido.materia}}</h5>
    <p><strong>Año: </strong>{{contenido.ano}}</p>
    <p><strong>Fecha de Publicación: </strong>{{contenido.fecha}}</p>
    <p>{{contenido.contenido}}</p>
    <br></br>

    <!-- Sección de comentarios -->
    <form method="POST">
        {% csrf_token %}
        <div class="form-group" style="max-width: 400px; padding: 10px; border-radius: 5px; background-color: #f9f9f9;">
            <h5>Comentarios</h5>
            <label for="comentario" placeholder="Deja tu comentario"></label>
            <textarea class="form-control" id="comentario" name="comentario" rows="3"></textarea>
        </div>
        <button type="submit" class="btn btn-primary" style="margin-top: 10px;">Enviar</button>
    </form>
    
    <!-- Botones de Denunciar y Votar -->
    <div style="margin-top: 20px; margin-bottom: 50px;">
        <button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#modal_denuncia">Denunciar</button>
        <button type="button" class="btn btn-success" data-bs-toggle="modal" data-bs-target="#modal_votar">Votar</button>
    </div>

    <!-- Modal Denuncia -->
<div class="modal fade" id="modal_denuncia" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Denunciar Contenido</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form method="POST" action="{% url 'denuncia' %}">
            {% csrf_token %}
            {{ denuncia_form.as_p }}
            <input type="hidden" name="contenido_id" value="{{ contenido.id }}">  
            <button type="submit" class="btn btn-danger">Enviar Denuncia</button>
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
          </form>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="modal_votar" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Votar Contenido</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
            <form method="POST" action="{% url 'voto' %}">
                {% csrf_token %}
                {{ voto_form.as_p }}
                <input type="hidden" name="contenido_id" value="{{ contenido.id }}">  
                <button type="submit" class="btn btn-success">Votar</button>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
            </form>
        </div>
      </div>
    </div>
  </div>
  {%endblock%}